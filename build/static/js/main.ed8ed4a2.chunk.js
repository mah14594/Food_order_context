(this["webpackJsonpreact-complete-guide"]=this["webpackJsonpreact-complete-guide"]||[]).push([[0],[,,,,function(e,t,a){e.exports={actions:"Checkout_actions__3iyMk","button--alt":"Checkout_button--alt__3VK3W",button:"Checkout_button__3LwUc",error:"Checkout_error__JDohR"}},,function(e,t,a){e.exports={"cart-items":"Cart_cart-items__1E5ip",total:"Cart_total__3HPoC",actions:"Cart_actions__2yoKs","button--alt":"Cart_button--alt__1tsmx",button:"Cart_button__1c-Rf"}},,function(e,t,a){e.exports={"cart-item":"CartItem_cart-item__3uJtA",summary:"CartItem_summary__2iLls",price:"CartItem_price__1kstg",amount:"CartItem_amount__29gcR",actions:"CartItem_actions__2CL9W"}},,,,,,,function(e,t,a){e.exports={button:"HeaderCartButton_button__3Bfe5",icon:"HeaderCartButton_icon__3rbZf",badge:"HeaderCartButton_badge__2tMtt",bump:"HeaderCartButton_bump__1SMNr"}},function(e,t,a){e.exports={meal:"MealItem_meal__otVdE",description:"MealItem_description__8LwEt",price:"MealItem_price__2jePn"}},function(e,t,a){e.exports={backdrop:"Modal_backdrop__P3r8Z",modal:"Modal_modal__29x_K","slide-down":"Modal_slide-down__115-_"}},,,function(e,t,a){e.exports={header:"Header_header__2Pd78","main-image":"Header_main-image__3ElXo"}},,,,function(e,t,a){e.exports={meals:"AvailableMeals_meals__20EIs","meals-appear":"AvailableMeals_meals-appear__2ehDl"}},function(e,t,a){e.exports={card:"Card_card__1h0bh"}},function(e,t,a){e.exports={form:"MealItemForm_form__12JAp"}},function(e,t,a){e.exports={input:"Input_input__WUupd"}},function(e,t,a){e.exports={summary:"MealsSummary_summary__3pFAi"}},,,,,function(e,t,a){},,,,,,,,function(e,t,a){"use strict";a.r(t);var n=a(9),c=a.n(n),r=(a(33),a(3)),s=a(1),o=a.n(s),i=a(20),l=a.n(i),u=o.a.createContext({items:["sushi","burger","melt"],totalAmount:5,addItem:function(e){},removeItem:function(e){}}),d=a(22),m=a(23),j=a(0);function b(){return Object(j.jsx)(d.a,{icon:m.a})}var h=a(15),p=a.n(h);function f(e){var t=Object(s.useContext)(u).items.reduce((function(e,t){return e+t.amount}),0);return Object(j.jsxs)("button",{className:p.a.button,onClick:e.onClick,children:[Object(j.jsx)("span",{className:p.a.icon,children:Object(j.jsx)(b,{})}),Object(j.jsx)("span",{children:"Your Cart"}),Object(j.jsx)("span",{className:p.a.badge,children:t})]})}var O=a.p+"static/media/meals.2971f633.jpg";function x(e){return Object(j.jsxs)(o.a.Fragment,{children:[Object(j.jsxs)("header",{className:l.a.header,children:[Object(j.jsx)("h1",{children:"React Meals"}),Object(j.jsx)(f,{onClick:e.onShowcart})]}),Object(j.jsx)("div",{className:l.a["main-image"],children:Object(j.jsx)("img",{src:O,alt:"table full of food"})})]})}var v=a(7),_=a.n(v),C=a(14),g=a(24),N=a.n(g),y=a(25),k=a.n(y);function w(e){return Object(j.jsx)("div",{className:"".concat(k.a.card," ").concat(e.className),children:e.children})}var A=a(16),I=a.n(A),S=a(26),M=a.n(S),E=a(27),R=a.n(E),B=o.a.forwardRef((function(e,t){return Object(j.jsxs)("div",{className:R.a.input,children:[Object(j.jsx)("label",{children:e.label}),Object(j.jsx)("input",{ref:t,type:e.type,id:e.id,min:e.min,max:e.max,value:e.value,step:e.step,defaultValue:e.default})]})}));function F(e){var t=Object(s.useState)(!0),a=Object(r.a)(t,2),n=a[0],c=a[1],o=Object(s.useRef)();return Object(j.jsxs)("form",{className:M.a.form,onSubmit:function(t){t.preventDefault();var a=o.current.value,n=+a;0===a.trim().length||n<1||n>5?c(!1):(c(!0),e.onAddtoCart(n))},children:[Object(j.jsx)(B,{ref:o,type:"number",step:"1",id:"amount",label:"Amount",default:"1"}),Object(j.jsx)("button",{type:"submit",children:"Add"}),!n&&Object(j.jsx)("p",{children:"Enter a Valid Amount"})]})}function D(e){var t="$".concat(e.price.toFixed(2)),a=Object(s.useContext)(u);return Object(j.jsxs)("li",{className:I.a.meal,children:[Object(j.jsxs)("div",{children:[Object(j.jsx)("h3",{children:e.name}),Object(j.jsx)("div",{className:I.a.description,children:e.description}),Object(j.jsx)("div",{className:I.a.price,children:t})]}),Object(j.jsx)("div",{children:Object(j.jsx)(F,{onAddtoCart:function(t){a.addItem({id:e.id,name:e.name,price:e.price,amount:t})}})})]})}function P(){var e=Object(s.useState)(!1),t=Object(r.a)(e,2),a=t[0],n=t[1],c=Object(s.useState)(null),o=Object(r.a)(c,2),i=o[0],l=o[1],u=Object(s.useState)([]),d=Object(r.a)(u,2),m=d[0],b=d[1],h=Object(s.useCallback)(Object(C.a)(_.a.mark((function e(){var t,a,c,r,s,o;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n(!0),l(null),e.prev=2,e.next=5,fetch("https://food-order-app-b0ebf-default-rtdb.firebaseio.com/meals.json");case 5:if((t=e.sent).ok){e.next=8;break}throw new Error("Something went wrong!");case 8:return e.next=10,t.json();case 10:for(o in a=e.sent,c=Object.keys(a),r=Object.values(a),s=[],c)s.push({id:o,name:r[o][o].name,price:r[o][o].price,description:r[o][o].description}),console.log(r[o][o].name);b(s),e.next=21;break;case 18:e.prev=18,e.t0=e.catch(2),l(e.t0.message);case 21:n(!1);case 22:case"end":return e.stop()}}),e,null,[[2,18]])}))),[]);Object(s.useEffect)((function(){h()}),[h]);var p=m.map((function(e,t){return Object(j.jsx)(D,{id:e.id,name:e.name,description:e.description,price:e.price},t)})),f=Object(j.jsx)("div",{children:p});return a&&(f=Object(j.jsx)("div",{children:"Please Wait! , Meals list is loading"})),i&&(f=Object(j.jsx)("div",{children:"Something Went Wrong! we will fix it as soon as possible"})),Object(j.jsx)(w,{className:N.a.meals,children:f})}var Z=a(28),H=a.n(Z),J=function(){return Object(j.jsxs)("section",{className:H.a.summary,children:[Object(j.jsx)("h2",{children:"Delicious Food, Delivered To You"}),Object(j.jsx)("p",{children:"Choose your favorite meal from our broad selection of available meals and enjoy a delicious lunch or dinner at home."}),Object(j.jsx)("p",{children:"All our meals are cooked with high-quality ingredients, just-in-time and of course by experienced chefs!"})]})};function L(){return Object(j.jsxs)(o.a.Fragment,{children:[Object(j.jsx)(J,{}),Object(j.jsx)(P,{})]})}var V=a(5),W=a(11),q=a(4),K=a.n(q),T=function(e){var t=Object(s.useState)(""),a=Object(r.a)(t,2),n=a[0],c=a[1],o=Object(s.useState)(!1),i=Object(r.a)(o,2),l=i[0],u=i[1];return{value:n,valueisvalid:e(n),istouched:l,reset:function(){c(""),u(!1)},changeinput:function(e){u(!0),c(e.target.value)},blurhandler:function(e){u(!0)}}},$=function(){var e=Object(s.useState)(!1),t=Object(r.a)(e,2),a=t[0],n=t[1],c=Object(s.useState)(null),o=Object(r.a)(c,2),i=o[0],l=o[1],u=Object(s.useCallback)(function(){var e=Object(C.a)(_.a.mark((function e(t,a){var c,r;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n(!0),l(null),e.prev=2,e.next=5,fetch(t.url,{method:t.method?t.method:"get",body:t.body?JSON.stringify(t.body):null,headers:t.headers?t.headers:{}});case 5:if((c=e.sent).ok){e.next=8;break}throw new Error("Request failed!");case 8:return e.next=10,c.json();case 10:r=e.sent,a(r),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(2),l(e.t0.message||"Something went wrong!");case 17:n(!1);case 18:case"end":return e.stop()}}),e,null,[[2,14]])})));return function(t,a){return e.apply(this,arguments)}}(),[]);return{isLoading:a,error:i,RequestData:u}};function z(e){var t=T((function(e){return e.trim().length>0})),a=t.value,n=t.valueisvalid,c=t.istouched,s=t.reset,o=t.changeinput,i=t.blurhandler,l=T((function(e){return 10===e.trim().length})),u=l.value,d=l.valueisvalid,m=l.istouched,b=l.reset,h=l.changeinput,p=l.blurhandler,f=/[0-9]{2,6} [A-Za-z]{3,}/,O=T((function(e){return f.test(e)})),x=O.value,v=O.valueisvalid,_=O.istouched,C=O.reset,g=O.changeinput,N=O.blurhandler,y=T((function(e){return e.trim().length>4})),k=y.value,w=y.valueisvalid,A=y.istouched,I=y.reset,S=y.changeinput,M=y.blurhandler,E=T((function(e){return 4===e.trim().length})),R=E.value,B=E.valueisvalid,F=E.istouched,D=E.reset,P=E.changeinput,Z=E.blurhandler,H=Object(W.useState)(!1),J=Object(r.a)(H,2),L=J[0],V=J[1],q=Object(W.useState)(!1),z=Object(r.a)(q,2),U=z[0],Y=z[1],G=$(),X=(G.isLoading,G.error),Q=G.RequestData,ee=e.cartinfo,te=function(e){if(e.preventDefault(),X)V(!0);else{var t={url:"https://food-order-app-b0ebf-default-rtdb.firebaseio.com/cart.json",method:"Post",body:{name:{enteredname:a},phone:{enteredphone:u},city:{enteredcity:k},address:{enteredaddress:x},zip:{enteredZip:R},cartitems:ee.itemlist,totalprice:ee.totalamount}};Q(t),s(),b(),C(),I(),D(),Y(!0)}},ae=n&&d&&v&&w&&B;c&&!n&&K.a.error,m&&!d&&K.a.error,_&&!v&&K.a.error,A&&!w&&K.a.error,F&&!B&&K.a.error,K.a.actions,K.a["button--alt"],e.gotocarthandler,K.a.button;return Object(j.jsxs)("form",{className:"row g-3",onSubmit:te,children:[Object(j.jsxs)("div",{className:"col-md-6",children:[Object(j.jsx)("label",{htmlFor:"name",className:"form-label",children:"Name"}),Object(j.jsx)("input",{autoComplete:"off",type:"text",className:"form-control",id:"name",value:a,onChange:o,onBlur:i}),c&&!n&&Object(j.jsx)("small",{className:K.a.error,children:"Name should have more than 3 letters"})]}),Object(j.jsxs)("div",{className:"col-md-6",children:[Object(j.jsx)("label",{htmlFor:"Phone",className:"form-label",children:"Phone Number"}),Object(j.jsx)("input",{autoComplete:"off",type:"phone",className:"form-control",id:"Phone",value:u,onChange:h,onBlur:p}),m&&!d&&Object(j.jsx)("small",{className:K.a.error,children:"phone number must be of 10 digits"})]}),Object(j.jsxs)("div",{className:"col-12",children:[Object(j.jsx)("label",{htmlFor:"inputAddress",className:"form-label",children:"Address"}),Object(j.jsx)("input",{autoComplete:"off",type:"text",className:"form-control",id:"inputAddress",value:x,onChange:g,onBlur:N}),_&&!v&&Object(j.jsx)("small",{className:K.a.error,children:"starts with the street number and ends with street name with a space between them"})]}),Object(j.jsxs)("div",{className:"col-md-6",children:[Object(j.jsx)("label",{htmlFor:"inputCity",className:"form-label",children:"City"}),Object(j.jsx)("input",{autoComplete:"off",type:"text",className:"form-control",id:"inputCity",value:k,onChange:S,onBlur:M}),A&&!w&&Object(j.jsx)("small",{className:K.a.error,children:"City name must be more than 4 letters"})]}),Object(j.jsxs)("div",{className:"col-md-2",children:[Object(j.jsx)("label",{htmlFor:"inputZip",className:"form-label",children:"Zip"}),Object(j.jsx)("input",{autoComplete:"off",type:"text",className:"form-control",id:"inputZip",value:R,onChange:P,onBlur:Z}),F&&!B&&Object(j.jsx)("small",{className:K.a.error,children:"Zip Code must have 4 digits"})]}),Object(j.jsxs)("div",{className:K.a.actions,children:[Object(j.jsx)("button",{className:K.a["button--alt"],onClick:e.gotocarthandler,children:"Go Back to cart"}),Object(j.jsx)("button",{disabled:!ae,type:"submit",className:K.a.button,children:"Confirm Order"})]}),L&&Object(j.jsx)("h4",{children:"Error occured in submitting data , try again"}),U&&Object(j.jsxs)("h4",{children:["your order was successfully copmleted , thank you for dealing with us"," "]})]})}var U=a(17),Y=a.n(U),G=function(e){return Object(j.jsx)("div",{className:Y.a.backdrop,onClick:e.onClose})},X=function(e){return Object(j.jsx)("div",{className:Y.a.modal,children:Object(j.jsx)("div",{className:Y.a.content,children:e.children})})},Q=document.getElementById("overlays");function ee(e){return Object(j.jsxs)(o.a.Fragment,{children:[c.a.createPortal(Object(j.jsx)(G,{onClose:e.onClose}),Q),c.a.createPortal(Object(j.jsx)(X,{children:e.children}),Q)]})}var te=a(6),ae=a.n(te),ne=a(8),ce=a.n(ne),re=function(e){var t="$".concat(e.price);return Object(j.jsxs)("li",{className:ce.a["cart-item"],children:[Object(j.jsxs)("div",{children:[Object(j.jsx)("h2",{children:e.name}),Object(j.jsxs)("div",{className:ce.a.summary,children:[Object(j.jsx)("span",{className:ce.a.price,children:t}),Object(j.jsxs)("span",{className:ce.a.amount,children:["x ",e.amount]})]})]}),Object(j.jsxs)("div",{className:ce.a.actions,children:[Object(j.jsx)("button",{onClick:e.onRemove,children:"\u2212"}),Object(j.jsx)("button",{onClick:e.onAdd,children:"+"})]})]})};function se(e){var t=Object(W.useState)(!1),a=Object(r.a)(t,2),n=a[0],c=a[1],o=Object(s.useContext)(u),i=o.items.length>0,l="$".concat(o.totalAmount.toFixed(2)),d=o.items,m=function(e){o.addItem(Object(V.a)(Object(V.a)({},e),{},{amount:1}))},b=function(e){o.removeItem(e)},h=Object(j.jsx)("ul",{className:ae.a["cart-items"],children:d.map((function(e,t){return Object(j.jsx)(re,{id:e.id,name:e.name,amount:e.amount,price:e.price,onRemove:b.bind(null,e.id),onAdd:m.bind(null,e)},t)}))}),p=Object(j.jsxs)("div",{children:[h,Object(j.jsxs)("div",{className:ae.a.total,children:[Object(j.jsx)("span",{children:"Total Amount"}),Object(j.jsx)("span",{children:l})]}),Object(j.jsxs)("div",{className:ae.a.actions,children:[Object(j.jsx)("button",{className:ae.a["button--alt"],onClick:e.onClose,children:"Close"}),i&&Object(j.jsx)("button",{onClick:function(){c(!0)},className:ae.a.button,children:"proceed to checkout"})]})]}),f=[];for(var O in d)f.push({itemname:d[O].name,itemamount:d[O].amount,itemprice:d[O].price});var x={itemlist:{itemslist:f},totalamount:{TotalAmount:l}};return n&&(p=Object(j.jsx)("div",{className:ae.a.checkoutform,children:n&&Object(j.jsx)(z,{cartinfo:x,gotocarthandler:function(){c(!1)}})})),Object(j.jsx)(ee,{onClose:e.onClose,children:p})}var oe=a(21),ie={items:[],totalAmount:0},le=function(e,t){if("ADD"===t.type){var a,n,c=e.totalAmount+t.item.price*t.item.amount,r=e.items.findIndex((function(e){return e.id===t.item.id})),s=e.items[r];return s?(a=Object(V.a)(Object(V.a)({},s),{},{amount:s.amount+t.item.amount}),(n=Object(oe.a)(e.items))[r]=a):(a=Object(V.a)({},t.item),n=e.items.concat(t.item)),{items:n,totalAmount:c}}if("REMOVE"===t.type){var o,i=e.items.findIndex((function(e){return e.id===t.id})),l=e.items[i],u=e.totalAmount-l.price;if(1===l.amount)o=e.items.filter((function(e){return e.id!==t.id}));else{var d=Object(V.a)(Object(V.a)({},l),{},{amount:l.amount-1});(o=Object(oe.a)(e.items))[i]=d}return{items:o,totalAmount:u}}return ie};function ue(e){var t=Object(s.useReducer)(le,ie),a=Object(r.a)(t,2),n=a[0],c=a[1],o={items:n.items,totalAmount:n.totalAmount,addItem:function(e){c({type:"ADD",item:e})},removeItem:function(e){c({type:"REMOVE",id:e})}};return Object(j.jsx)(u.Provider,{value:o,children:e.children})}var de=function(){var e=Object(s.useState)(!1),t=Object(r.a)(e,2),a=t[0],n=t[1];return Object(j.jsxs)(ue,{children:[a&&Object(j.jsx)(se,{onClose:function(){n(!1)}}),Object(j.jsx)(x,{onShowcart:function(){n(!0)}}),Object(j.jsx)("main",{children:Object(j.jsx)(L,{})})]})};c.a.render(Object(j.jsx)(de,{}),document.getElementById("root"))}],[[41,1,2]]]);
//# sourceMappingURL=main.ed8ed4a2.chunk.js.map